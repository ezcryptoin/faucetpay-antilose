<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FaucetPay Anti-Lose</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body {
    background-color: #0f172a;
    color: #f8fafc;
    font-family: Arial, sans-serif;
    text-align: center;
    padding: 20px;
}
h1 { color: #38bdf8; }
input, button {
    padding: 8px;
    margin: 5px;
    border-radius: 8px;
    border: none;
    font-size: 16px;
}
input { width: 120px; }
button {
    background-color: #22d3ee;
    cursor: pointer;
}
button:hover { background-color: #06b6d4; }
.result {
    margin-top: 15px;
    padding: 15px;
    background-color: #1e293b;
    border-radius: 10px;
}
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}
th, td {
    border: 1px solid #334155;
    padding: 8px;
    text-align: center;
}
th { background-color: #1e3a8a; }
canvas { background: #f8fafc; border-radius: 10px; margin-top: 20px; }
@media (max-width: 600px) {
    input { width: 100px; }
    canvas { width: 100% !important; height: auto !important; }
}
</style>
</head>

<body>
<h1>FaucetPay Anti-Lose Bot + Kalkulator</h1>

<!-- Input Panel -->
<label>Base Bet (satoshi):</label><br>
<input type="number" id="baseBet" value="10"><br>

<label>Max Lose:</label><br>
<input type="number" id="maxLose" value="7"><br>

<label>Payout (misal 1.98):</label><br>
<input type="number" id="payout" value="1.98" step="0.01"><br>

<label>Max Bet Limit:</label><br>
<input type="number" id="maxBetLimit" value="500000"><br>

<button onclick="calculate()">Hitung</button>
<button onclick="simulate()">Simulasi Cepat</button>
<button onclick="toggleBot()">Start/Pause Bot</button>
<button onclick="toggleTurbo()">Toggle Turbo</button>

<div class="result" id="output"></div>
<table id="resultTable">
    <thead>
        <tr>
            <th>Lose ke-</th>
            <th>Bet (satoshi)</th>
            <th>Total Modal</th>
            <th>Profit Jika Menang</th>
            <th>Limit</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<div class="result" id="simulationResult"></div>
<canvas id="simChart" width="800" height="400"></canvas>
<canvas id="probChart" width="800" height="400"></canvas>

<!-- Sound -->
<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-win-bling-2068.mp3"></audio>
<audio id="loseSound" src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3"></audio>

<script>
let chart, probChart;
let botRunning = false;
let turbo = false;

function calculate() {
    const baseBet = +document.getElementById('baseBet').value;
    const maxLose = +document.getElementById('maxLose').value;
    const payout = +document.getElementById('payout').value;
    const maxBetLimit = +document.getElementById('maxBetLimit').value;

    const output = document.getElementById('output');
    const tableBody = document.getElementById('resultTable').querySelector('tbody');

    let totalModal = (Math.pow(2, maxLose) - 1) * baseBet;
    let probLose = Math.pow(0.5, maxLose) * 100;

    output.innerHTML = `
        <h3>Hasil</h3>
        <p>Base Bet: <b>${baseBet}</b></p>
        <p>Max Lose: <b>${maxLose}</b></p>
        <p>Total Modal Aman: <b>${totalModal}</b></p>
        <p>Probabilitas Lose ${maxLose}x: <b>${probLose.toFixed(4)}%</b></p>
    `;

    tableBody.innerHTML = '';
    let total = 0;
    for (let i = 0; i <= maxLose; i++) {
        let currentBet = baseBet * Math.pow(2, i);
        total += currentBet;
        let profit = (currentBet * payout) - total;
        let warn = currentBet > maxBetLimit ? "❌" : "✅";
        tableBody.innerHTML += `
        <tr>
            <td>${i}</td>
            <td>${currentBet}</td>
            <td>${total}</td>
            <td>${profit}</td>
            <td>${warn}</td>
        </tr>`;
    }

    plotProbabilityChart();
}

function simulate() {
    const baseBet = +document.getElementById('baseBet').value;
    const maxLose = +document.getElementById('maxLose').value;
    const payout = +document.getElementById('payout').value;

    let balance = (Math.pow(2, maxLose) - 1) * baseBet;
    let currentBet = baseBet;
    let streak = 0;
    let wins = 0;
    let losses = 0;
    let balances = [balance];
    let steps = [0];

    for (let i = 1; i <= 500; i++) {
        let win = Math.random() < 0.5;
        if (win) {
            balance += (currentBet * payout) - currentBet;
            document.getElementById('winSound').play();
            currentBet = baseBet;
            streak = 0;
            wins++;
        } else {
            balance -= currentBet;
            document.getElementById('loseSound').play();
            streak++;
            if (streak > maxLose) {
                losses++;
                balance -= currentBet;
                currentBet = baseBet;
                streak = 0;
            } else {
                currentBet *= 2;
            }
        }
        balances.push(balance);
        steps.push(i);
    }

    document.getElementById('simulationResult').innerHTML = `
        <h3>Simulasi 500x</h3>
        <p>Saldo Akhir: <b>${balance.toFixed(2)}</b></p>
        <p>Win: <b>${wins}</b> | Lose: <b>${losses}</b></p>
    `;

    if (chart) chart.destroy();
    const ctx = document.getElementById('simChart').getContext('2d');
    chart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: steps,
            datasets: [{
                label: 'Saldo (satoshi)',
                data: balances,
                borderColor: 'blue',
                backgroundColor: 'rgba(59, 130, 246, 0.2)',
                fill: true,
                tension: 0.3,
                pointRadius: 0,
            }]
        }
    });
}

function toggleBot() {
    if (!botRunning) {
        botRunning = true;
        runBot();
    } else {
        botRunning = false;
    }
}

async function runBot() {
    const baseBet = +document.getElementById('baseBet').value;
    const maxLose = +document.getElementById('maxLose').value;
    const payout = +document.getElementById('payout').value;
    let balance = (Math.pow(2, maxLose) - 1) * baseBet;
    let currentBet = baseBet;
    let streak = 0;

    let step = 0;
    let balances = [balance];
    let steps = [step];

    while (botRunning) {
        const win = Math.random() < 0.5;
        step++;
        if (win) {
            balance += (currentBet * payout) - currentBet;
            document.getElementById('winSound').play();
            currentBet = baseBet;
            streak = 0;
        } else {
            balance -= currentBet;
            document.getElementById('loseSound').play();
            streak++;
            if (streak > maxLose) {
                balance -= currentBet;
                currentBet = baseBet;
                streak = 0;
            } else {
                currentBet *= 2;
            }
        }
        balances.push(balance);
        steps.push(step);

        if (chart) chart.destroy();
        const ctx = document.getElementById('simChart').getContext('2d');
        chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: steps,
                datasets: [{
                    label: 'Saldo (satoshi)',
                    data: balances,
                    borderColor: 'blue',
                    backgroundColor: 'rgba(59, 130, 246, 0.2)',
                    fill: true,
                    tension: 0.3,
                    pointRadius: 0,
                }]
            }
        });

        await new Promise(r => setTimeout(r, turbo ? 50 : 500));
    }
}

function toggleTurbo() {
    turbo = !turbo;
    alert("Turbo Mode: " + (turbo ? "ON" : "OFF"));
}

function plotProbabilityChart() {
    const baseBet = +document.getElementById('baseBet').value;
    const payouts = [];
    const modals = [];
    for (let lose = 1; lose <= 20; lose++) {
        payouts.push(lose);
        modals.push((Math.pow(2, lose) - 1) * baseBet);
    }

    if (probChart) probChart.destroy();
    const ctx = document.getElementById('probChart').getContext('2d');
    probChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: payouts,
            datasets: [{
                label: 'Total Modal vs Max Lose',
                data: modals,
                borderColor: 'red',
                backgroundColor: 'rgba(248, 113, 113, 0.2)',
                fill: true,
                tension: 0.3,
                pointRadius: 2,
            }]
        }
    });
}
</script>
</body>
</html>
